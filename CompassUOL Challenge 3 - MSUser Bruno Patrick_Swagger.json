{"openapi":"3.0.1","info":{"title":"CompassUOL - Challenge 3 - MS User API","description":"API em microserviço para gerenciamento de usuários","contact":{"name":"Bruno \"quasemago\" Ronning","url":"https://github.com/quasemago","email":"brunoronningfn@gmail.com"},"version":"v1"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"security":[{"BearerTokenAuthentication":[]}],"tags":[{"name":"Login","description":"API Login - Tem a responsabilidade de autenticar o login do usuário na API."},{"name":"User","description":"API User - Tem a responsabilidade de armazenar e gerenciar os dados de usuário."}],"paths":{"/v1/users/{id}":{"get":{"tags":["User"],"summary":"Recuperar informações de um usuário existente","description":"Recurso para recuperar um usuário existente através do Id.","operationId":"findUserById","parameters":[{"name":"id","in":"path","description":"Identificador (Id) do usuário no banco de dados.","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Usuário recuperado com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDTO"}}}},"401":{"description":"Usuário não autenticado para acessar esse recurso."},"404":{"description":"Usuário informado não encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessageDTO"}}}}},"security":[{"BearerTokenAuthentication":[]}]},"put":{"tags":["User"],"summary":"Atualizar um usuário existente","description":"Recurso para atualizar as informações de um usuário existente através do Id.","operationId":"updateUser","parameters":[{"name":"id","in":"path","description":"Identificador (Id) do usuário no banco de dados.","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateRequestDTO"}}},"required":true},"responses":{"200":{"description":"Usuário atualizado com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDTO"}}}},"400":{"description":"Recurso não processado devido a requisição inválida.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessageDTO"}}}},"401":{"description":"Usuário não autenticado para acessar esse recurso."},"404":{"description":"Usuário informado não encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessageDTO"}}}}},"security":[{"BearerTokenAuthentication":[]}]}},"/v1/users/{id}/password":{"put":{"tags":["User"],"summary":"Atualizar a senha de um usuário existente","description":"Recurso para atualizar a senha de um usuário existente através do Id.","operationId":"updateUserPassword","parameters":[{"name":"id","in":"path","description":"Identificador (Id) do usuário no banco de dados.","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPasswordRequestDTO"}}},"required":true},"responses":{"204":{"description":"Senha do usuário alterada com sucesso."},"400":{"description":"Recurso não processado devido a requisição inválida.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessageDTO"}}}},"401":{"description":"Usuário não autenticado para acessar esse recurso."},"404":{"description":"Usuário informado não encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessageDTO"}}}}},"security":[{"BearerTokenAuthentication":[]}]}},"/v1/users":{"post":{"tags":["User"],"summary":"Criar um novo usuário","description":"Recurso para criar um novo usuário","operationId":"createUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreateRequestDTO"}}},"required":true},"responses":{"201":{"description":"Usuário cadastrado com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDTO"}}}},"400":{"description":"Recurso não processado devido a requisição inválida.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessageDTO"}}}},"409":{"description":"Já existe um usuário cadastrado com esse e-mail ou CPF.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessageDTO"}}}}}}},"/v1/login":{"post":{"tags":["Login"],"summary":"Autenticar na API","description":"Recurso para autenticação na API.","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLoginRequestDTO"}}},"required":true},"responses":{"200":{"description":"Autenticação realizada com sucesso. Retorno de um Bearer Token.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JwtTokenDTO"}}}},"400":{"description":"Recurso não processado devido a requisição inválida ou credenciais inválidas.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessageDTO"}}}}}}}},"components":{"schemas":{"AddressResponseDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"street":{"type":"string"},"city":{"type":"string"},"state":{"type":"string"},"cep":{"type":"string"}}},"UserResponseDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"firstName":{"type":"string"},"lastName":{"type":"string"},"cpf":{"type":"string"},"birthDate":{"type":"string","format":"date"},"email":{"type":"string"},"address":{"$ref":"#/components/schemas/AddressResponseDTO"},"active":{"type":"boolean"}}},"ErrorMessageDTO":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"status":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"$ref":"#/components/schemas/FieldErrorDetails"}}}},"FieldErrorDetails":{"type":"object","properties":{"field":{"type":"string"},"message":{"type":"string"}}},"UserUpdateRequestDTO":{"required":["active","birthDate","cep","firstName","lastName"],"type":"object","properties":{"firstName":{"type":"string"},"lastName":{"type":"string"},"cpf":{"type":"string"},"birthDate":{"type":"string","format":"date"},"email":{"type":"string"},"cep":{"pattern":"^[0-9]{5}-[0-9]{3}$","type":"string"},"active":{"type":"boolean"}}},"UserPasswordRequestDTO":{"required":["password"],"type":"object","properties":{"password":{"type":"string"}}},"UserCreateRequestDTO":{"required":["active","birthDate","cep","firstName","lastName","password"],"type":"object","properties":{"firstName":{"type":"string"},"lastName":{"type":"string"},"cpf":{"type":"string"},"birthDate":{"type":"string","format":"date"},"email":{"type":"string"},"cep":{"pattern":"^[0-9]{5}-[0-9]{3}$","type":"string"},"password":{"type":"string"},"active":{"type":"boolean"}}},"JwtTokenDTO":{"type":"object","properties":{"email":{"type":"string"},"created":{"type":"string","format":"date-time"},"expiration":{"type":"string","format":"date-time"},"accessToken":{"type":"string"}}},"UserLoginRequestDTO":{"required":["email","password"],"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}}}},"securitySchemes":{"BearerTokenAuthentication":{"type":"http","description":"Insira um Bearer Token para autenticação","scheme":"bearer","bearerFormat":"JWT"}}}}